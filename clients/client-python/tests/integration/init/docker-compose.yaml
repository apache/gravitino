#
# Copyright 2024 Datastrato Pvt Ltd.
# This software is licensed under the Apache License version 2.
#
version: '3.0'
services:

  hive:
    image: datastrato/gravitino-ci-hive:0.1.12
    networks:
      - python-net
    container_name: python-ci-hive
    environment:
      - HADOOP_USER_NAME=root
    entrypoint:  /bin/bash /tmp/hive/init.sh
    volumes:
      - ./hive:/tmp/hive
      - ../../../it-archive/log/python-ci-container-log/hive:/tmp/root
      - ../../../it-archive/log/python-ci-container-log/hdfs:/usr/local/hadoop/logs
    healthcheck:
      test: ["CMD", "/tmp/check-status.sh"]
      interval: 10s
      timeout: 60s
      retries: 10

networks:
  python-net:
    driver: bridge
    name: python-net
    ipam:
      config:
        - subnet: 10.20.31.16/28
